# NerdCam — Tasks 2026-02-20

## Sprint 1 Closure
- [x] Archive Sprint 1 plan, todo, and summary
- [x] Update roadmap (Sprint 1 complete, Sprint 2/3 reshuffled)
- [x] Update AI_INSTRUCTIONS.md (language rule, current priority)
- [x] Doc-keeper audit — fix stale references (stream-debugger agent, concept.md, roadmap)

## Sprint 2: Modular Refactor

### Phase A: Foundation
- [ ] A1: Create `nerdcam/` package skeleton + thin launcher
- [ ] A2: Extract `crypto.py`
- [ ] A3: Extract `camera_cgi.py`

### Phase B: State Centralization
- [ ] B1: Create `state.py` with `AppState` dataclass
- [ ] B2: Extract `config.py` with AppState parameter

### Phase C: Module Extraction
- [ ] C1: Extract `streaming.py` (MjpegSource class)
- [ ] C2: Extract `recording.py` (Recorder class + configurable output dir)
- [ ] C3: Extract `patrol.py` (PatrolController class)
- [ ] C4: Extract `ptz.py` + fix PTZ Go bug
- [ ] C5: Extract `camera_control.py`

### Phase D: Server Decomposition
- [ ] D1: Extract `server.py` (route dispatcher + structured error responses)

### Phase E: Cleanup + Finalization
- [ ] E1: Clean up `cli.py` (remove all globals)
- [ ] E2: Remove temporary bridges
- [ ] E3: Update docs (AI_INSTRUCTIONS.md, README.md, roadmap.md)
- [ ] Full regression test
