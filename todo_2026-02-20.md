# NerdCam — Tasks 2026-02-20

## Done Today
- [x] TCP as default RTSP transport — zero post-timeout restart failures
- [x] Stale detection threshold 5s → 2s — total freeze ~4s instead of ~7s
- [x] PTZ preset parsing fix — now correctly reads all presets (was only first)
- [x] RTSP keepalive investigation — confirmed unfixable firmware bug (275s timeout, end-of-life)
- [x] `/api/fmp4` endpoint — fragmented MP4 (H.264 copy + AAC) for MSE streaming
- [x] MSE browser engine — codec detection, buffer management, auto-reconnect, fallback
- [x] Hybrid streaming in web viewer — MJPEG (mic off) / MSE (mic on)
- [x] Apply Gain button for mic gain — prevents RTSP session exhaustion from slider spam
- [x] Verified `/api/mjpeg` contract for NerdPudding (headers + JPEG frames intact)
- [x] Updated ISSUES_REPORT.md, roadmap.md, README.md with Sprint 1 findings
- [x] Committed Sprint 1 implementation

## Tomorrow / Backlog
- [ ] PTZ preset Go buttons — save works but Go may not navigate correctly. Suspected name mismatch between `setPTZPresetPoint` and `ptzGotoPresetPoint` CGI commands. Needs debugging with raw CGI to see what names the camera actually stores vs what the Go command expects.
- [ ] Long-running stability test — let web viewer and NerdPudding run for extended period, check for memory leaks or degradation
- [ ] Consider merging dev branch to main after PTZ Go fix
